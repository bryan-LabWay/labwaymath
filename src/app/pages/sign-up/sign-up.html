<main class="contact-page">
  <section class="contact-banner">
    <div class="banner-strip"></div>

    <div class="logo-circle">
      <img
        src="assets/logo-labway-math.svg"
        alt="L.A.B. Way Math logo"
        class="logo-house"
      />
    </div>

    <div class="contact-card">
      <h1 class="contact-title">Sign Up</h1>

      <form class="contact-form" [formGroup]="form" (ngSubmit)="onPayNow()">
        <!-- Full Name -->
        <div class="form-group">
          <label for="fullName">
            <span>Full Name</span>
            <span class="required">*</span>
          </label>
          <input id="fullName" type="text" formControlName="fullName" />
          <small class="error" *ngIf="hasError('fullName','required')">Full name is required.</small>
        </div>

        <!-- Preferred Email -->
        <div class="form-group">
          <label for="email">
            <span>Preferred Contact Email</span>
            <span class="required">*</span>
          </label>
          <input id="email" type="email" formControlName="email" />
          <small class="error" *ngIf="hasError('email','required')">Email is required.</small>
          <small class="error" *ngIf="hasError('email','email')">Enter a valid email.</small>
        </div>

        <!-- Preferred Contact Number -->
        <div class="form-group">
          <label for="phone">
            <span>Preferred Contact Number</span>
            <span class="required">*</span>
          </label>
          <input id="phone" type="tel" formControlName="phone" />
          <small class="error" *ngIf="hasError('phone','required')">Contact number is required.</small>
        </div>

        <p class="error" *ngIf="errorMsg">{{ errorMsg }}</p>

        <div class="form-group">
        <re-captcha
            [siteKey]="siteKey"
            (resolved)="onRecaptchaResolved($event)"
        ></re-captcha>
        </div>

        <div class="submit-row">
          <button
            type="submit"
            class="submit-btn"
            [disabled]="isPaying || form.invalid || !priceId || !recaptchaToken"
          >
            {{ isPaying ? 'Redirecting…' : 'Pay Now' }}
          </button>
        </div>

        <div class="submit-row" style="margin-top: 0.75rem;">
          <button type="button" class="secondary-btn" (click)="goBackToPricing()">
            Back to Pricing
          </button>
        </div>
      </form>
    </div>

    <div class="loading-overlay" *ngIf="isPaying">
      <div class="loading-box">
        <div class="spinner"></div>
        <p>Redirecting to payment…</p>
      </div>
    </div>
  </section>
</main>
